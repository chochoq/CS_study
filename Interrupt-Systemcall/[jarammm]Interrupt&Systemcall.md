# 1. μΈν„°λ½νΈ Interrupt

<br/>

## μ •μ


ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ” λ„μ¤‘μ— **μκΈ°μΉ μ•μ€ μƒν™©**μ΄ λ°μƒν•  κ²½μ° **ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ‘μ—…μ„ μ¦‰μ‹ μ¤‘λ‹¨**ν•κ³ , λ°μƒλ μƒν™©μ— λ€ν• μ°μ„  μ²λ¦¬κ°€ ν•„μ”ν•¨μ„ **CPU**μ—κ² μ•λ¦¬λ” κ²ƒ

- μκΈ°μΉ μ•μ€ μƒν™©μ΄ κΌ­ μ—λ¬λ” μ•„λ‹λ‹¤.
- ν„μ¬ μν–‰μ¤‘μΈ μΌλ³΄λ‹¤ λ” μ¤‘μ”ν• μΌ(ex. μ…μ¶λ ¥, μ°μ„  μμ„ μ—°μ‚° λ“±)μ΄ μλ‹¤λ©΄ κ·Έκ²ƒμ„ λ¨Όμ € μ²λ¦¬ν•κ³ , ν•λ μΌμ„ κ³„μ†ν•λ” κ²ƒμ„ λ§ν•κΈ°λ„ ν•λ‹¤.
<br/><br/>

1. μ™Έλ¶€/λ‚΄λ¶€ μΈν„°λ½νΈ
    
    > CPUμ **ν•λ“μ›¨μ–΄** μ‹ νΈμ— μν•΄ λ°μƒ
    > 
    1. μ™Έλ¶€ μΈν„°λ½νΈ
        1. **μ…μ¶λ ¥ μ¥μΉ, νƒ€μ΄λ° μ¥μΉ, μ „μ›** λ“± μ™Έλ¶€μ μΈ μ”μΈμΌλ΅ λ°μƒ
        2. CPUκ°€ μ•„λ‹ λ‹¤λ¥Έ ν•λ“μ›¨μ–΄ μ¥μΉκ°€ cpuμ— μ–΄λ–¤ μ‚¬μ‹¤μ„ μ•λ ¤μ£Όκ±°λ‚ cpu μ„λΉ„μ¤λ¥Ό μ”μ²­ν•΄μ•Ό ν•  κ²½μ° λ°μƒ
            
            μμ‹ : 
            
            **1. `μ •μ „`, νΉμ€ μλ£ μ „λ‹¬ κ³Όμ •μ—μ„ μ¤λ¥ λ°μƒκ³Ό κ°™μ€ `μ»΄ν“¨ν„° μμ²΄ λ‚΄μ—μ„μ κΈ°κ³„μ μΈ λ¬Έμ `
            - μ •μ „ μ‹ :
                1) μ •μ „ μ „κΉμ§€μ μ²λ¦¬ κ²°κ³Όλ¥Ό λ³΄μ΅΄
                2) μ „μ› νλ³µ ν›„ λ‚λ¨Έμ§€ μ—…λ¬΄ μν–‰
            
            - μ…μ¶λ ¥ μ‹ :
                1) CPUμ™€ μ£Όλ³€ μ¥μΉ μ‚¬μ΄μ μ†λ„ μ°¨μ΄μ— μν•΄ λ°μƒ
                2) `μ…λ ¥`(μ΄λΌλ” μ…μ¶λ ¥μ΄) ν•„μ” μ‹, CPUλ” μ…λ ¥ μ¥μΉμ— μ›ν•λ” μ •λ³΄λ¥Ό μ½λ„λ΅ μ”μ²­ν• ν›„ μν–‰ κ°€λ¥ν• μ‘μ—…μ„ λ‹¤μ‹ μν–‰
                3) (μ…λ ¥ μ¥μΉλ΅λ¶€ν„°) μ›ν•λ” μ •λ³΄κ°€ μ¤€λΉ„λλ©΄ `μ…λ ¥ μ¥μΉκ°€ μΈν„°λ½νΈ μ”μ²­`
                4) μ„μ™€ κ°™μ€ κ³Όμ •μ„ ν†µν•΄ CPUμ™€ μ…μ¶λ ¥ μ¥μΉμ λ³‘ν–‰ λ™μ‘(= μ…μ¶λ ¥μ€ μ›ν•λ” μ •λ³΄λ¥Ό μ¤€λΉ„, CPUλ” κΈ°μ΅΄ μ‘μ—… μν–‰)μΌλ΅ ν•λ“μ›¨μ–΄ μ΄μ ν¨μ¨ μ¦λ€
            
            2. λ³΄νΈλ κΈ°μ–µ κ³µκ°„μ— μ ‘κ·Όν•κ±°λ‚, λ¶λ²•μ μΈ μ§€μ‹ μν–‰ λ“±κ³Ό κ°™μ€ `ν”„λ΅κ·Έλ¨ μƒμ λ¬Έμ `
            3. μ»΄ν“¨ν„° μ¤νΌλ μ΄ν„°(μ»΄ν“¨ν„° μ‹μ¤ν… μ „λ°μ„ κ΄€λ¦¬ν•λ” μ‚¬λ)μ μλ„μ μΈ μ¤‘λ‹¨
            4. `μ…μ¶λ ¥`κ³Ό κ°™μ€ `μ£Όλ³€ μ¥μΉλ“¤μ μ΅°μ‘`μ— CPUμ κΈ°λ¥μ΄ μ”μ²­λλ” κ²½μ°** <br/><br/>

    2. λ‚΄λ¶€ μΈν„°λ½νΈ
        1. **Trap**μ΄λΌκ³  λ¶€λ¥΄λ©°, **`μλ»λ λ…λ Ήμ΄λ‚ λ°μ΄ν„°λ¥Ό μ‚¬μ©`**ν•  λ• λ°μƒ
            1. μμ‹ : 0μΌλ΅ λ‚λ„κΈ°κ°€ λ°μƒ, μ¤λ²„ν”λ΅μ°, λ…λ Ήμ–΄λ¥Ό μλ» μ‚¬μ©ν• κ²½μ° (Exception μμ™Έμƒν™©), system call ...

<br/><br/>

2. μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ
    
    > **λ…λ Ήμ–΄μ μν–‰**μ— μν•΄ λ°μƒ
    > 
    
    ν”„λ΅κ·Έλ¨ μ²λ¦¬ μ¤‘ λ…λ Ήμ μ”μ²­μ— μν•΄ λ°μƒν• κ²ƒ (SVC μΈν„°λ½νΈ)
    
    **μμ‹ : μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰μ‹ν‚¬ λ• λ°μƒ**
    
    1) ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ λλ” κ°μ‹ν”„λ΅κ·Έλ¨(SuperVisor Call)μ„ νΈμ¶ν•λ” λ™μ‘μ„ μν–‰ν•κ±°λ‚
    2) μ†ν”„νΈμ›¨μ–΄ μ΄μ© μ¤‘μ— λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ¥Ό μ‹¤ν–‰μ‹ν‚¤λ©΄
    
    β†’ *μ‹λ¶„ν• * μ²λ¦¬λ¥Ό μ„ν•΄ μμ› ν• λ‹Ή λ™μ‘μ΄ μν–‰λλ‹¤.
    
<br/><br/>

## μΈν„°λ½νΈμ μ²΄μ 

<br/>

### 1. μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ

![image](https://user-images.githubusercontent.com/90924434/136702341-73026ed0-c2b5-4e83-84f4-95de63c1128a.png)

<br/>

### 2. μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄

![image](https://user-images.githubusercontent.com/90924434/136702347-197f95d7-70aa-4d46-99dc-37953e28e793.png)

<br/>

### 3. μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄

![image](https://user-images.githubusercontent.com/90924434/136702352-95a55605-fdbc-461b-84ab-28189c9ac82d.png)

<br/>

## μΈν„°λ½νΈ λ°μƒ-μ²λ¦¬ κ³Όμ •

![image](https://user-images.githubusercontent.com/90924434/136702358-29c637f8-470e-47d3-aa4f-44a3f53c0988.png)

<br/>

1. μ£Ό ν”„λ΅κ·Έλ¨μ΄ μ‹¤ν–‰λλ‹¤κ°€
2. process Aκ°€ `system call` μ„ ν†µν•΄ μΈν„°λ½νΈ λ°μƒ μ‹ν‚΄
3. ν„μ¬ μν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨ μ¤‘λ‹¨
    1. **ν„μ¬ μν–‰μ¤‘μΈ λ…λ Ήμ μν–‰μ΄ μ™„λ£λ ν›„ μ¤‘λ‹¨!**
    2. ν„μ¬μ μ£ΌκΈ°μ–µ μ¥μΉ μ‚¬μ΄ν΄μ΄ λλ‚λ” μ‹μ μ΄ μ•„λ‹!
4. PC(Program Counter) μ— λ‹¤μμ— μ‹¤ν–‰ν•  λ…λ Ήμ μ£Όμ†λ¥Ό μ €μ¥
5. μƒνƒ λ μ§€μ¤ν„°(SR)μ™€ PC, PCB λ“±μ„ **μ¤νƒ**μ— μ μ‹ μ €μ¥ν• λ’¤μ—(**`μ„μ‹ λ³΄λ¥`**μ μλ„λ΅ μ¤νƒμ— μ μ‹ μ €μ¥)

<br/><br/>

6. μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ½κ³  ISR μ£Όμ†κ°’μ„ μ–»μ–΄ ISR(Interrupt Service Routine)λ΅ μ ν”„ν•μ—¬ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ‹¤
    - μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄
        
        μ™ λ£¨ν‹΄?
        
        β†’ μ–΄λ–¤ μ†μ¤(source)κ°€ **μΈν„°λ½νΈ μ”μ²­**μ„ ν•λ©΄ **λ°λ³µμ μΌλ΅ μν–‰**ν•λ” μΌμ΄ μλ‹¤λ” λ»
        
        - λ‹¤λ¥Έ λ§λ΅ μΈν„°λ½νΈ ν•Έλ“¤λ¬
        - μΈν„°λ½μ¤ μ„λΉ„μ¤ λ£¨ν‹΄ μ—­μ‹ κΈ°μ–µμ¥μΉ λ‚΄μ— μ €μ¥λμ–΄ μλ” **ν”„λ΅κ·Έλ¨(program)**
    - μΈν„°λ½νΈ λ²΅ν„°
        
        μΈν„°λ½λ“ λ°μƒμ‹ μ²λ¦¬ν•΄μ•Ό ν•  **μΈν„°λ½νΈ ν•Έλ“¤λ¬**μ μ£Όμ†λ¥Ό μΈν„°λ½νΈ λ³„λ΅ λ³΄κ΄€ν•κ³  μλ” ν…μ΄λΈ”
        
        ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b2a1cd7a-e3a3-4b75-a690-a795d462130c/Untitled.png)
        
        AVR ATmega128 λ§μ΄ν¬λ΅μ»¨νΈλ΅¤λ¬κ°€ μ •μν•λ” μΈν„°λ½νΈ λ²΅ν„°μ μΌλ¶€
        
        - μΈν„°λ½νΈ ν•Έλ“¤λ¬λ” κ°κ° `Program Address`μ— μ €μ¥λμ–΄ μκ³ 
        - source : μΈν„°λ½νΈλ¥Ό μ”μ²­ν• μ†μ¤
        - `Vector No.` λ” μΈν„°λ½νΈ λ²νΈ
        - μΈν„°λ½νΈ λ²νΈ
            - (μμ™Έμƒν™© μΈν„°λ½νΈ μ μ™Έ) μ΄μμ²΄μ κ°€ κ²°μ •
            - λ¦¬λ…μ¤μ—μ„μ μΈν„°λ½νΈ λ²νΈ
                - 0 ~ 31 : μμ™Έμƒν™© μΈν„°λ½νΈ
                - 32 ~ 47 : ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ
                - 128 : μ‹μ¤ν… μ½
7. ν•΄λ‹Ή μ½”λ“λ¥Ό μ‹¤ν–‰
8. ν•΄λ‹Ή μΌμ„ λ‹¤ μ²λ¦¬ν•λ©΄, λ€ν”Όμ‹ν‚¨ λ μ§€μ¤ν„°λ¥Ό λ³µμ›
9. ISR(μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄)μ λμ— IRET(`Interrupt Return`) λ…λ Ήμ–΄μ— μν•΄ μΈν„°λ½νΈκ°€ ν•΄μ  λ¨
10. IRET λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ©΄, λ€ν”Όμ‹ν‚¨ PC κ°’μ„ λ³µμ›ν•μ—¬ μ΄μ „ μ‹¤ν–‰ μ„μΉλ΅ λ³µμ›
11. ν•λ μΌμ„ λ§μ € μν–‰

<br/><br/>

## μ°μ„  μμ„

<br/>

### μΈν„°λ½νΈ μ°μ„  μμ„ μ²΄μ 

- κ° μ¥μΉμ— μ°μ„ μμ„λ¥Ό λ¶€κ³Όν•λ” κΈ°λ¥
- μΈν„°λ½νΈλ¥Ό μ”μ²­ν• μ¥μΉμ μ°μ„  μμ„λ¥Ό νλ³„ν•λ” κΈ°λ¥
- μ°μ„ μμ„κ°€ λ†’μ€ κ²ƒμ„ λ¨Όμ € μ²λ¦¬ν•  μ μλ” κΈ°λ¥

<br/>

### μΈν„°λ½νΈ μ°μ„  μμ„

![image](https://user-images.githubusercontent.com/90924434/136702373-ea13a175-2e56-4523-9cf3-708e11f9fbcd.png)

<br/>

### μΈν„°λ½νΈ μ°μ„ μμ„ νλ³„ λ°©λ²•

<br/>

1. ν΄λ§ λ°©μ‹ - μ†ν”„νΈμ›¨μ–΄μ μΈ λ°©λ²•

- **μΈν„°λ½νΈ μ”μ²­ ν”λκ·Έ**λ¥Ό μ°¨λ΅€λ΅ λΉ„κµν•μ—¬ **μ°μ„ μμ„**κ°€ κ°€μ¥ λ†’μ€ μΈν„°λ½νΈ μμ›μ„ μ°Ύκ³ , μ΄μ— ν•΄λ‹Ήν•λ” **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄**μ„ μν–‰ν•λ‹¤.
- **μ†λ„**κ°€ λΉ λ¥Έ μ¥μΉμ— λ†’μ€ λ“±κΈ‰μ„ λ¶€μ—¬ν•λ‹¤.
- μ°μ„ μμ„ λ³€κ²½μ΄ μ‰½λ‹¤.
- λ§μ€ μΈν„°λ½νΈκ°€ μμ„ κ²½μ° **ν•λ“μ›¨μ–΄ μ μΈ λ°©λ²•μ— λΉ„ν•΄μ„ μ°μ„ μμ„ νλ‹¨ μ†λ„κ°€ λλ¦¬λ‹¤**
- νλ΅κ°€ **κ°„λ‹¨**ν•κ³  μµν†µμ„±μ΄ μμΌλ©°, **λ³„λ„μ ν•λ“μ›¨μ–΄κ°€ ν•„μ” μ—†λ‹¤.**

<br/>

2. μΈν„°λ½νΈ λ°©μ‹ -  ν•λ“μ›¨μ–΄μ μΈ λ°©λ²•

- μΈν„°λ½νΈλ¥Ό μ”μ²­ν•  μ μλ” μ¥μΉμ™€ CPUμ‚¬μ΄μ— μ¥μΉλ²νΈλ¥Ό μ‹λ³„ν•  μ μλ” λ²„μ¤λ¥Ό μ§λ ¬/λ³‘λ ¬λ΅ μ—°κ²°ν•λ‹¤.
- μΈν„°λ½νΈ λ²΅ν„°λ” μΈν„°λ½νΈλ¥Ό λ°μƒν• μ¥μΉκ°€ λ¶„κΈ°ν•  κ³³μ— λ€ν• μ •λ³΄μ΄λ‹¤.
- μ†ν”„νΈμ›¨μ–΄μ μΈ λ°©λ²•μ— λΉ„ν•΄ λΉ„κ²½μ μ μ΄λ‹¤.
- νλ΅κ°€ λ³µμ΅ν•κ³  μµν†µμ„±μ΄ μ—†μΌλ‚, λ³„λ„μ μ†ν”„νΈμ›¨μ–΄κ°€ ν•„μ”μ—†μ΄ ν•λ“μ›¨μ–΄λ΅ μ²λ¦¬λλ―€λ΅ μ†λ„κ°€ λΉ λ¥΄λ‹¤.
- ν•λ“μ›¨μ–΄μ μΈ λ°©λ²•μ€ μ•„λ 2κ°€μ§€λ΅ λ‚λ‰λ‹¤.
    - Daisy Chain
        
        **Daisy Chain**
        
        - *μΈν„°λ½νΈκ°€ λ°μƒν•λ” λ¨λ“  μ¥μΉ*λ¥Ό ν•λ‚μ **μ§λ ¬ νμ„ **μΌλ΅ μ—°κ²°ν•λ‹¤.
        - **μ°μ„ μμ„**κ°€ λ†’μ€ μ¥μΉλ¥Ό μƒμ„μ— λ‘κ³  μ°μ„ μμ„ μ°¨λ΅€λ€λ΅ λ°°μΉν•λ‹¤. - μ°μ„  μμ„λ€λ΅ μΈν„°λ½νΈ μ²λ¦¬
        
    - λ³‘λ ¬(Parallel) μ°μ„ μμ„ λ¶€μ—¬ λ°©μ‹
        
        **λ³‘λ ¬ μ°μ„  μμ„ λ¶€μ—¬**
        
        - κ° μ¥μΉλ³„ μ°μ„ μμ„λ¥Ό νλ³„ν•κΈ° μ„ν•Β Mask registerμ— bitλ¥Ό μ„¤μ •ν•λ‹¤.
        - Mask registerμƒ μ°μ„ μμ„κ°€ λ†’μ€ μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰μ¤‘ μ°μ„ μμ„κ°€ λ‚®μ€ bitλ“¤μ„ λΉ„ν™μ„±ν™” μ‹ν‚¬ μ μλ‹¤.
        - λ°λ€λ΅ μ°μ„ μμ„κ°€ λ†’μ€ μΈν„°λ½νΈλ” λ‚®μ€ μΈν„°λ½νΈ μν–‰ μ¤‘μ—λ„ μ°μ„  μ²λ¦¬λλ‹¤.
<br/>
- μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•  λ• μΈν„°λ½νΈ ν”λκ·Έ(IF)λ¥Ό 1λ΅ ν•λ©΄ μΈν„°λ½νΈ λ°μƒμ„ λ°©μ§€ν•  μ μλ‹¤.

<br/>

> μΈν„°λ½νΈ λ°©μ‹
> 
- **ν•λ“μ›¨μ–΄λ΅ μμ›μ„ λ°›μ•„μ•Όν•λ” μ μ•½**μ΄ μ΅΄μ¬ β†’ κ·Έλ¬λ‚ ν΄λ§μ— λΉ„ν•΄ μ‹ μ†ν• λ€μ‘ κ°€λ¥μΌ€ν•¨ β†’ **μ‹¤μ‹κ°„ λ€μ‘**μ΄ ν•„μ” μ‹ ν•„μ κΈ°λ¥μ„

<br/><br/><br/>

# 2. μ‹μ¤ν…μ½ System Call

[μ‹μ¤ν… νΈμ¶(System Call)](https://whitesnake1004.tistory.com/2)

<br/><br/><br/><br/><br/>

---

**μ°Έκ³ **

[[μ •λ³΄μ²λ¦¬][ECκµ¬μ΅°] 31. μΈν„°λ½νΈ Interrupt](https://m.blog.naver.com/syunjae21/222065512231)

[μΈν„°λ½νΈ(Interrupt) | π‘¨π»β€π’» Tech Interview](https://gyoogle.dev/blog/computer-science/operating-system/Interrupt.html)

[μΈν„°λ½νΈ μ²λ¦¬κ³Όμ • λ° μ •μ, μΆ…λ¥ μ•μ•„λ³΄κΈ°](https://mindstation.tistory.com/164)

[[μ»΄ν“¨ν„°κµ¬μ΅°] μΈν„°λ½νΈ(Interrupt)λ€?](https://whatisthenext.tistory.com/147#%EA%B0%9C%EC%9A%94)

[μΈν„°λ½νΈ(Interrupt)μ κ°λ…κ³Ό μΆ…λ¥](https://raisonde.tistory.com/entry/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8Interrupt%EC%9D%98-%EA%B0%9C%EB%85%90%EA%B3%BC-%EC%A2%85%EB%A5%98)
